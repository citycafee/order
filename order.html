<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   Cafeteria Menu
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <style>
   #cartWindow {
            position: absolute;
            cursor: move;
        }
  </style>
 </head>
 <body class="bg-gray-100">
  <div class="min-h-screen flex flex-col">
   <!-- Navbar -->
   <nav class="bg-white shadow-md">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
     <div class="text-xl font-bold text-gray-800">
      Cafeteria
     </div>
     <div class="space-x-4">
      <a class="text-gray-600 hover:text-gray-800" href="#dashboard" onclick="openSection('dashboard')">
       Dashboard
      </a>
      <a class="text-gray-600 hover:text-gray-800" href="#QRCode" onclick="openSection('QR Code')">
       QR Code
      </a>
      <a class="text-gray-600 hover:text-gray-800" href="#menu" onclick="openSection('menu')">
       Menu
      </a>
      <a class="text-gray-600 hover:text-gray-800" href="#management" onclick="openSection('management')">
       Management
      </a>
     </div>
    </div>
   </nav>
   <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center" id="menuTitle">
    Menu
   </h2>
   <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="menuSection">
    <div class="bg-white p-6 rounded-lg shadow-md">
     <img alt="Image of a coffee cup with steam rising" class="w-full h-40 object-cover rounded-md mb-4 cursor-pointer" height="200" onclick="addToCart('Coffee', 3.00, this.nextElementSibling.nextElementSibling)" src="https://storage.googleapis.com/a1aa/image/ED8lnUhmRmKsOFrnAq8dEQUF6ShmdNjoYOqbOHBwG2scyGfJA.jpg" width="300"/>
     <h3 class="text-xl font-semibold text-gray-800 mb-2">
      Coffee
     </h3>
     <p class="text-gray-600 mb-2">
      Freshly brewed coffee to start your day.
     </p>
     <p class="text-gray-800 font-bold mb-2">
      $3.00
     </p>
     <button class="text-white px-4 py-2 rounded add-to-cart bg-blue-500" onclick="addToCart('Coffee', 3.00, this)">
      Add to Order
     </button>
    </div>
    <div class="bg-white p-6 rounded-lg shadow-md">
     <img alt="Image of a sandwich with various fillings" class="w-full h-40 object-cover rounded-md mb-4 cursor-pointer" height="200" onclick="addToCart('Sandwich', 5.50, this.nextElementSibling.nextElementSibling)" src="https://storage.googleapis.com/a1aa/image/eWaswG5VlbQfpEMdjInZQHGNytEYfYP8CEmbXBZdh9FWT24nA.jpg" width="300"/>
     <h3 class="text-xl font-semibold text-gray-800 mb-2">
      Sandwich
     </h3>
     <p class="text-gray-600 mb-2">
      Delicious sandwiches made to order.
     </p>
     <p class="text-gray-800 font-bold mb-2">
      $5.50
     </p>
     <button class="text-white px-4 py-2 rounded add-to-cart bg-blue-500" onclick="addToCart('Sandwich', 5.50, this)">
      Add to Order
     </button>
    </div>
    <div class="bg-white p-6 rounded-lg shadow-md">
     <img alt="Image of a salad bowl with fresh vegetables" class="w-full h-40 object-cover rounded-md mb-4 cursor-pointer" height="200" onclick="addToCart('Salad', 4.00, this.nextElementSibling.nextElementSibling)" src="https://storage.googleapis.com/a1aa/image/EETs9k4AjZZfBKQ2xk04DjntUfSCUNN78mC8DemR8c6gT24nA.jpg" width="300"/>
     <h3 class="text-xl font-semibold text-gray-800 mb-2">
      Salad
     </h3>
     <p class="text-gray-600 mb-2">
      Healthy and fresh salads.
     </p>
     <p class="text-gray-800 font-bold mb-2">
      $4.00
     </p>
     <button class="text-white px-4 py-2 rounded add-to-cart bg-blue-500" onclick="addToCart('Salad', 4.00, this)">
      Add to Order
     </button>
    </div>
    <div class="bg-white p-6 rounded-lg shadow-md">
     <img alt="Image of a smoothie in a glass" class="w-full h-40 object-cover rounded-md mb-4 cursor-pointer" height="200" onclick="addToCart('Smoothie', 4.50, this.nextElementSibling.nextElementSibling)" src="https://storage.googleapis.com/a1aa/image/aPy5H1tkhJ5mItqIjfBz27eulasrkiRXwhnRFTeARrpmT24nA.jpg" width="300"/>
     <h3 class="text-xl font-semibold text-gray-800 mb-2">
      Smoothie
     </h3>
     <p class="text-gray-600 mb-2">
      Refreshing fruit smoothies.
     </p>
     <p class="text-gray-800 font-bold mb-2">
      $4.50
     </p>
     <button class="bg-blue-500 text-white px-4 py-2 rounded add-to-cart" onclick="addToCart('Smoothie', 4.50, this)">
      Add to Order
     </button>
    </div>
    <div class="bg-white p-6 rounded-lg shadow-md">
     <img alt="Image of a pastry with icing" class="w-full h-40 object-cover rounded-md mb-4 cursor-pointer" height="200" onclick="addToCart('Pastry', 2.50, this.nextElementSibling.nextElementSibling)" src="https://storage.googleapis.com/a1aa/image/M8nQBzFmlpoMB5Fxc9lF51mtzgD54fKSTdsBcfN3r1w1Jb8TA.jpg" width="300"/>
     <h3 class="text-xl font-semibold text-gray-800 mb-2">
      Pastry
     </h3>
     <p class="text-gray-600 mb-2">
      Sweet and savory pastries.
     </p>
     <p class="text-gray-800 font-bold mb-2">
      $2.50
     </p>
     <button class="bg-blue-500 text-white px-4 py-2 rounded add-to-cart" onclick="addToCart('Pastry', 2.50, this)">
      Add to Order
     </button>
    </div>
    <div class="bg-white p-6 rounded-lg shadow-md">
     <img alt="Image of a bowl of soup" class="w-full h-40 object-cover rounded-md mb-4 cursor-pointer" height="200" onclick="addToCart('Soup', 3.50, this.nextElementSibling.nextElementSibling)" src="https://storage.googleapis.com/a1aa/image/I9fZk5ROqT0foUd0WwMRlV5wXoAKcrfeFZvxTRCLiQK6msxPB.jpg" width="300"/>
     <h3 class="text-xl font-semibold text-gray-800 mb-2">
      Soup
     </h3>
     <p class="text-gray-600 mb-2">
      Warm and comforting soups.
     </p>
     <p class="text-gray-800 font-bold mb-2">
      $3.50
     </p>
     <button class="bg-blue-500 text-white px-4 py-2 rounded add-to-cart" onclick="addToCart('Soup', 3.50, this)">
      Add to Order
     </button>
    </div>
   </div>
   <div class="fixed top-4 left-4 bg-white p-4 rounded-lg shadow-md w-64" id="cartWindow">
    <h3 class="text-xl font-bold text-gray-800 mb-4">
     Cart
    </h3>
    <ul class="list-disc pl-5 text-gray-600 mb-4" id="cartList">
    </ul>
    <p class="text-gray-800 font-bold mb-4" id="totalPrice">
     Total: $0.00
    </p>
    <button class="bg-blue-500 text-white px-4 py-2 rounded-md mb-2" id="submitOrder" type="button">
     Submit Order
    </button>
    <button class="bg-red-500 text-white px-4 py-2 rounded-md" id="resetCart" type="button">
     Reset
    </button>
   </div>
   <div class="fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 hidden" id="orderModal">
    <div class="bg-white p-6 rounded-lg shadow-md w-80">
     <h3 class="text-xl font-bold text-gray-800 mb-4">
      Order Summary
     </h3>
     <ul class="list-disc pl-5 text-gray-600 mb-4" id="orderSummaryList">
     </ul>
     <p class="text-gray-800 font-bold mb-4" id="orderTotalPrice">
      Total: $0.00
     </p>
     <div class="mb-4">
      <label class="block text-gray-700 mb-2" for="tableNumber">
       Table Number or Customer Name
      </label>
      <select class="border border-gray-300 p-2 rounded w-full" id="tableNumber">
       <option value="">
        Select Table Number
       </option>
       <option value="1">
        Table 1
       </option>
       <option value="2">
        Table 2
       </option>
       <option value="3">
        Table 3
       </option>
       <option value="4">
        Table 4
       </option>
       <option value="5">
        Table 5
       </option>
       <option value="6">
        Table 6
       </option>
       <option value="7">
        Table 7
       </option>
       <option value="8">
        Table 8
       </option>
       <option value="9">
        Table 9
       </option>
       <option value="10">
        Table 10
       </option>
       <option value="11">
        Table 11
       </option>
       <option value="12">
        Table 12
       </option>
       <option value="13">
        Table 13
       </option>
       <option value="14">
        Table 14
       </option>
       <option value="15">
        Table 15
       </option>
       <option value="16">
        Table 16
       </option>
       <option value="17">
        Table 17
       </option>
       <option value="18">
        Table 18
       </option>
       <option value="19">
        Table 19
       </option>
       <option value="20">
        Table 20
       </option>
       <option value="21">
        Table 21
       </option>
       <option value="22">
        Table 22
       </option>
       <option value="23">
        Table 23
       </option>
       <option value="24">
        Table 24
       </option>
       <option value="25">
        Table 25
       </option>
       <option value="Customer Name">
        Enter Customer Name
       </option>
      </select>
      <input class="border border-gray-300 p-2 rounded w-full mt-2 hidden" id="customerName" placeholder="Enter customer name" type="text"/>
     </div>
     <button class="bg-blue-500 text-white px-4 py-2 rounded-md mb-2" id="confirmOrder" type="button">
      Confirm Order
     </button>
     <button class="bg-gray-500 text-white px-4 py-2 rounded-md" id="closeModal" type="button">
      Close
     </button>
    </div>
   </div>
   <div class="fixed bottom-4 right-4 bg-white p-4 rounded-lg shadow-md hidden" id="shortcutModal">
    <h3 class="text-lg font-bold text-gray-800 mb-2">
     Item Added
    </h3>
    <p class="text-gray-600" id="shortcutItem">
     Sandwich
    </p>
   </div>
   <div class="container mx-auto px-4 py-4 hidden" id="managementSection">
    <div class="bg-white p-6 rounded-lg shadow-md">
     <h3 class="text-xl font-semibold text-gray-800 mb-4">
      Submitted Orders
     </h3>
     <ul class="list-disc pl-5 text-gray-600 mb-4" id="orderList">
     </ul>
     <div class="flex space-x-4">
      <button class="bg-blue-500 text-white px-4 py-2 rounded-md" id="printOrders" type="button">
       Print Orders
      </button>
      <button class="bg-red-500 text-white px-4 py-2 rounded-md" id="resetOrders" type="button">
       Reset Orders
      </button>
      <button class="bg-green-500 text-white px-4 py-2 rounded-md" id="generateSales" type="button">
       Generate Sales
      </button>
     </div>
    </div>
   </div>
   <script>
    const cart = [];
            let totalPrice = 0;

            function addToCart(item, price, button) {
                const existingItem = cart.find(cartItem => cartItem.item === item);
                if (existingItem) {
                    existingItem.quantity += 1;
                    existingItem.totalPrice += price;
                } else {
                    cart.push({ item, price, quantity: 1, totalPrice: price });
                }
                totalPrice += price;
                updateCart();
                showShortcutModal(item);
                button.classList.remove('bg-blue-500');
                button.classList.add('bg-green-500');
            }

            function updateCart() {
                const cartList = document.getElementById('cartList');
                cartList.innerHTML = '';
                cart.forEach((cartItem, index) => {
                    const li = document.createElement('li');
                    li.textContent = `${cartItem.item} x${cartItem.quantity} - $${cartItem.totalPrice.toFixed(2)}`;
                    cartList.appendChild(li);
                });
                document.getElementById('totalPrice').textContent = `Total: $${totalPrice.toFixed(2)}`;
            }

            function showShortcutModal(item) {
                const shortcutModal = document.getElementById('shortcutModal');
                const shortcutItem = document.getElementById('shortcutItem');
                shortcutItem.textContent = item;
                shortcutModal.classList.remove('hidden');
                setTimeout(() => {
                    shortcutModal.classList.add('hidden');
                }, 2000);
            }

            document.getElementById('submitOrder').addEventListener('click', function() {
                if (cart.length === 0) {
                    alert('Your cart is empty!');
                    return;
                }
                const orderSummaryList = document.getElementById('orderSummaryList');
                orderSummaryList.innerHTML = '';
                cart.forEach((cartItem, index) => {
                    const li = document.createElement('li');
                    li.textContent = `${cartItem.item} x${cartItem.quantity} - $${cartItem.totalPrice.toFixed(2)}`;
                    orderSummaryList.appendChild(li);
                });
                document.getElementById('orderTotalPrice').textContent = `Total: $${totalPrice.toFixed(2)}`;
                document.getElementById('orderModal').classList.remove('hidden');
            });

            document.getElementById('confirmOrder').addEventListener('click', function() {
                const tableNumber = document.getElementById('tableNumber').value;
                if (!tableNumber) {
                    alert('Please enter your table number or customer name.');
                    return;
                }
                const orderDetails = cart.map(cartItem => `${cartItem.item} x${cartItem.quantity}`).join(', ');
                const orderTotal = totalPrice.toFixed(2);
                const order = {
                    tableNumber,
                    orderDetails,
                    orderTotal
                };
                const orders = JSON.parse(localStorage.getItem('orders')) || [];
                orders.push(order);
                localStorage.setItem('orders', JSON.stringify(orders));
                alert('Order submitted for ' + tableNumber + ': ' + orderDetails + `\nTotal: $${orderTotal}`);
                cart.length = 0; // Clear the cart
                totalPrice = 0;
                updateCart();
                document.querySelectorAll('.add-to-cart').forEach(button => {
                    button.classList.remove('bg-green-500');
                    button.classList.add('bg-blue-500');
                });
                document.getElementById('orderModal').classList.add('hidden');
                loadOrders(); // Load orders after confirming
            });

            document.getElementById('closeModal').addEventListener('click', function() {
                document.getElementById('orderModal').classList.add('hidden');
            });

            document.getElementById('resetCart').addEventListener('click', function() {
                cart.length = 0; // Clear the cart
                totalPrice = 0;
                updateCart();
                document.querySelectorAll('.add-to-cart').forEach(button => {
                    button.classList.remove('bg-green-500');
                    button.classList.add('bg-blue-500');
                });
            });

            // Drag and Drop functionality for the cart window
            const cartWindow = document.getElementById('cartWindow');
            let isDragging = false;
            let offsetX, offsetY;

            cartWindow.addEventListener('mousedown', (e) => {
                isDragging = true;
                offsetX = e.clientX - cartWindow.getBoundingClientRect().left;
                offsetY = e.clientY - cartWindow.getBoundingClientRect().top;
                cartWindow.style.cursor = 'grabbing';
            });

            document.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    cartWindow.style.left = `${e.clientX - offsetX}px`;
                    cartWindow.style.top = `${e.clientY - offsetY}px`;
                }
            });

            document.addEventListener('mouseup', () => {
                isDragging = false;
                cartWindow.style.cursor = 'move';
            });

            function loadOrders() {
                const orderList = document.getElementById('orderList');
                orderList.innerHTML = '';
                const orders = JSON.parse(localStorage.getItem('orders')) || [];
                orders.forEach((order, index) => {
                    const li = document.createElement('li');
                    li.innerHTML = `<strong>${order.tableNumber}</strong><br>${order.orderDetails} - Total: $${order.orderTotal}`;
                    orderList.appendChild(li);
                });
            }

            function openSection(section) {
                if (section === 'management') {
                    document.getElementById('managementSection').classList.remove('hidden');
                    document.getElementById('menuSection').classList.add('hidden');
                    document.getElementById('menuTitle').classList.add('hidden');
                    document.getElementById('cartWindow').classList.add('hidden');
                    loadOrders();
                } else {
                    document.getElementById('managementSection').classList.add('hidden');
                    document.getElementById('menuSection').classList.remove('hidden');
                    document.getElementById('menuTitle').classList.remove('hidden');
                    document.getElementById('cartWindow').classList.remove('hidden');
                }
            }

            document.getElementById('printOrders').addEventListener('click', function() {
                window.print();
            });

            document.getElementById('resetOrders').addEventListener('click', function() {
                localStorage.removeItem('orders');
                loadOrders();
            });

            document.getElementById('generateSales').addEventListener('click', function() {
                const orders = JSON.parse(localStorage.getItem('orders')) || [];
                let totalSales = 0;
                orders.forEach(order => {
                    totalSales += parseFloat(order.orderTotal);
                });
                alert(`Total Sales: $${totalSales.toFixed(2)}`);
            });
   </script>
  </div>
 </body>
</html>
